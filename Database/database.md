# 데이터베이스

데이터베이스에 대해 톺아보자.

1. 왜 데이터베이스를 사용해야할까?
    1. 많은 정보들을 체계적으로 정리하기 위해서. 
    2. 데이터베이스 <> DBMS <> 응용 프로그램의 3중주로 응용 프로그램이 필요로 하는 데이터를 빠르게 전달할 수 있음. 
2. 데이터를 잘 정리한다는 건 어떤 의미일까?
    1. 데이터를 잘게 부수자. 독립적인 의미를 가질 때까지. 의존성을 낮추자. 
        1. 엔터티와 릴레이션
            1. 데이터베이스에 저장되는 기본 단위 
            2. 엔터티란, 여러 속성을 지닌 명사 
            3. 릴레이션은 엔터티에 관한 데이터를 담는 ‘통’
            4. 릴레이션이라는 ‘통’ 에 들어가는 실제 내용물이 ‘레코드’ 
            5. 레코드가 모여 릴레이션을 구성하고 릴레이션이 모여 데이터베이스가 되는 것. 
            6. ‘속성’과 ‘도메인’ > 도메인이란, 속성이 가질 수 있는 값의 집합. 예를 들어 성별이 속성이라면 {남, 여}가 도메인이 된다. 
            7. 레코드가 아닌, 릴레이션의 속성 부분을 필드라고 한다. 
            8. 속성은 타입을 가진다. 
    2. 잘게 부서진 릴레이션 사이의 관계를 잘 정리하자. 
        1. 1:1 관계
        2. 1:N 관계
        3. N:M 관계
        4. 릴레이션 간의 관계를 더 명확하게 해줄 뿐더러, 테이블의 인덱스로도 설정할 수 있는, 고유한 값들이 있으면 좋겠지 않아??
            1. 키를 사용하자. 
                1. 슈퍼키(유일성만 만족)
                2. 후보키(유일성과 최소성 만족)
                    1. 기본키
                    2. 대체키(기본키로 선정되지 못한 모든 후보키)
                3. 외래키
                    1. 다른 릴레이션의 기본키를 참조하는 값으로, 릴레이션간의 관계를 확인하는 포인트가 된다. 이때 외래키는 중복되어도 괜찮다.
    3. 이러한 관계를 어떻게 잘 가시적으로 보여줄 수 있을까? 
        1. ERD 를 그림으로써 보여줄 수 있다. 
3. 잘 만들어진 데이터베이스를 어떻게 안정적으로 유지할 수 있을까?
    1. 정규화를 거치자. 
    2. 정규화는 정규형 원칙에 의거하여 시행된다. 
        1. 정규형 원칙 
            1. 좀 더 좋은 구조의, 자료 중복성은 감소된, 독립적인 관계는 별도의 릴레이션으로 표현된, 각각의 릴레이션은 독립적으로 표현되도록 하는 원칙 
        2. 제1 정규형 
            1. 릴레이션의 속성 값 중에서 한 개의 기본키에 대해 두 개 이상의 값을 가지는 반복 집합이 있어서는 안 된다. 
            2. 예를 들어, 수강명이라는 속성에 {A수업, B수업}이 동시에 있는 레코드가 있다면, 하나의 속성에 하나의 값만 들어가도록 분리해야 한다. 
        3. 제2 정규형
            1. 릴레이션이 제1정규형을 만족하면서 부분 함수의 종속성을 제거한 형태. 
            2. 쉬운 설명 필요
        4. 제3 정규형
            1. 제2 정규형이고 기본키가 아닌 모든 속성이 이행적 함수 종속을 만족하지 않는 상태 
            2. 쉬운 설명 필요 
        5. 보이스/코드 정규형 
            1. 제3정규형이고 결정자가 후보키가 아닌 함수 종속 관계를 제거하여 릴레이션의 함수 종속 관계에서 모든 결정자가 후보키인 상태
            2. 쉬운 설명 필요 
4. 데이터베이스에 여럿이 동시에 접근하려고 할 때 어떻게 하면 좋을까? 
    1. 트랜잭션을 통해 무결성을 지킨다. 
        1. 트랜잭션의 특성 
            1. 원자성 : 트랜잭션 도중에 어떤 에러가 발생했을 때, 결과는 트랜잭션을 아예 시작하기 전과 같아야 한다. 
                1. 커밋과 롤백 > 어떤 트랜잭션이 무사히 완료되면 커밋을 하게 되고, 롤백을 할 때 커밋 단위로 함으로써 과거 상태로 돌아갈 수 있다. 
                2. 트랜잭션 전파 > 트랜잭션을 할 때 여러 메서드를 한 번에 처리하기 위해 전파를 사용한다. 
            2. 일관성 : 허용된 방식으로만 데이터를 변경할 수 있다. 예를 들어 양수 데이터를 음수로 바꾸는 요청은 거부한다. 
            3. 격리성 : 트랜잭션 수행 시 다른 트랜잭션이 끼어들지 못한다. 즉 복수의 트랜잭션이 실행된다면, 병렬적으로 동시에 처리되지 못하고 순차적으로 실행되어야 한다. 이때 격리 수준에 따라 여러 현상이 일어날 수 있다. (추가 서술 필요)
            4. 지속성 : 성공적으로 수행된 트랜잭션은 영원히 반영되어야 한다. 체크섬, 롤백 등의 기능이 있다. 
5. 어떻게 필요한 정보를 더 빠르게 찾을 수 있을까? 
    1. 인덱스를 사용하자. 
    2. 인덱스는 주로 B트리를 사용하며, 맨 위 루트 노드부터 시작하여 브랜치 노드를 거쳐 리프 노드까지 내려오며 탐색한다. 
6. 두 개 이상의 릴레이션 사이의 관계를 이용하려면 어떻게 해야할까?
    1. 조인을 사용하자. 
        1. 내부 조인
            1. 두 테이블 간의 교집합
        2. 왼쪽 조인
            1. 테이블 A와 B가 서로 일치하는 레코드와 함께 테이블 A를 기준으로 완전한 테이블을 형성한다. 만약 B에 일치하는 항목이 없다면 null 이 된다. (예를 들어..?)
        3. 오른쪽 조인
        4. 합집합 조인
