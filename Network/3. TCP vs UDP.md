# TCP vs UDP

- TCPμ™€ UDPλ” μ „μ†΅ κ³„μΈµ(Transport)μ—μ„ μ‚¬μ©λλ” ν”„λ΅ν† μ½μ΄λ‹¤. 

### TCPμ™€ UDPμ νƒ„μƒ λ°°κ²½

- μ „μ†΅ κ³„μΈµ μ „ λ‹¨κ³„μ—μ„ λ…Όλ¦¬μ£Όμ†μΈ IP μ£Όμ†λ¥Ό κΈ°λ°μΌλ΅ μ¥μΉμ—μ„ μ¥μΉλ΅μ λ°μ΄ν„° μ „μ†΅μ΄ λ°μƒν•κ² λλ‹¤. μ¦‰, ν•λ‚μ μ¥λΉ„μ—μ„ λ‹¤λ¥Έ ν•λ‚μ μ¥λΉ„λ΅ λ°μ΄ν„° μ „λ‹¬μ΄ μΌμ–΄λ‚κ² λλ‹¤.
- μ΄λ•, IP ν”„λ΅ν† μ½μ κ²½μ° λ°μ΄ν„° μ „μ†΅ μƒνƒμ— λ€ν•΄μ„λ” κ΄€λ¦¬κ°€ μ΄λ¤„μ§€μ§€ μ•λ”λ‹¤.
- λ•λ¬Έμ— λ§μ•½ ν†µμ‹  κ³Όμ • μ¤‘ IPμ—μ„ μ¤λ¥κ°€ λ°μƒν–μ„ κ²½μ° _ICMP_ κ°€ μ΄λ¥Ό μ•μ•„μ°¨λ¦¬κ³ , μ¤λ¥λ¥Ό μ•λ¦¬λ” κΈ°λ¥μ„ ν•λ‹¤.

    > ICMP (_Internet Control Message Protocol_) <br> IP ν¨ν‚· μ „μ†΅ μ¤‘ μ—λ¬ λ°μƒ μ‹ μ—λ¬ λ°μƒ μ›μΈμ„ μ•λ ¤μ£Όκ±°λ‚ λ„¤νΈμ›ν¬ μƒνƒλ¥Ό μ§„λ‹¨ν•΄μ£Όλ” κΈ°λ¥μ„ μ κ³µν•λ” ν”„λ΅ν† μ½

- __ν•μ§€λ§ ICMPλ” μ¤λ¥ μƒν™©μ„ μ•λ ¤μ£ΌκΈ°λ§ ν•  λΏ λ€μ²λ¥Ό ν•μ§€λ” λ»ν•λ‹¤. μ΄λ¥Ό λ³΄μ™„ν•κΈ° μ„ν•΄ IPλ³΄λ‹¤ μƒμ„ κ³„μΈµμ—μ„ λ€μ²κΉμ§€ ν•΄μ£Όλ” ν”„λ΅ν† μ½, UDPμ™€ TCPκ°€ λ‚μ¤κ² λμ—λ‹¤.__ π

### TCP (Transmission Control Protocol)

π“ __ν‚¤μ›λ“ : μ•μ •μ , μμ„λ€λ΅, μ—λ¬ μ—†μ΄__ 


- μ—°κ²° μ§€ν–¥μ  ν”„λ΅ν† μ½, μ¦‰, ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μ—°κ²°λ μƒνƒμ—μ„ λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›λ” ν”„λ΅ν† μ½μ΄λ‹¤.

__TCPμ νΉμ§•__

- μ—°κ²°ν• μ„λΉ„μ¤λ΅ κ°€μƒ νμ„  λ°©μ‹μ„ μ κ³µν•λ‹¤.
    - 3-way ν•Έλ“μ‰μ΄ν¬ κ³Όμ •μ„ ν†µν•΄ μ—°κ²°μ„ μ„¤μ •ν•κ³ , 4-way ν•Έλ“μ‰μ΄ν¬ κ³Όμ •μ„ ν†µν•΄ μ—°κ²°μ„ ν•΄μ ν•λ‹¤.
- νλ¦„ μ μ–΄(Flow Control)
    - λ°μ΄ν„° μ²λ¦¬ μ†λ„λ¥Ό μ΅°μ ν•΄ μμ‹ μμ λ²„νΌ μ¤λ²„ν”λ΅μ°λ¥Ό λ°©μ§€ν•λ‹¤. μ†΅μ‹ μΈ΅μ΄ μμ‹ μΈ΅λ³΄λ‹¤ μ „μ†΅ μ†λ„κ°€ λΉ λ¥΄λ©΄ μμ‹ μκ°€ λ°›μ„ μ μλ” μ©λ‰μ„ λ„μ–΄κ° μ μκΈ° λ•λ¬Έμ—, μ΄λ¥Ό λ°©μ§€ν•κΈ° μ„ν•΄ νλ¦„ μ μ–΄λ¥Ό ν•λ‹¤.
    - Stop and Wait, Sliding Window(Go Back N ARQ)μ΄ λ€ν‘μ μΈ λ°©λ²•μ΄λ‹¤.
- νΌμ΅ μ μ–΄(Congestion Control)
    - λ„¤νΈμ›ν¬ λ‚΄μ ν¨ν‚· μκ°€ κ³Όλ„ν•κ² μ¦κ°€ν•μ§€ μ•λ„λ΅ λ°©μ§€ν•λ‹¤.
    - AIMD, Slow Start, Fast Retransmit, Fast Recovery λ°©μ‹μΌλ΅ μ μ–΄λ¥Ό ν•  μ μλ‹¤.

- ν° λ°μ΄ν„°λ¥Ό ν¨ν‚·(packet) λ‹¨μ„λ΅ λ‚λ  μ „μ†΅μ„ ν•κ² λλ©°, μ „μ†΅ κ³Όμ •μ—μ„ ν¨ν‚·λ“¤μ΄ λ„μ°©ν•λ” _μμ„κ°€ λ³΄μ¥λλ‹¤._ 
- ν¨ν‚·λ“¤μ΄ λ¨λ‘ λ¬΄μ‚¬ν λ„μ°©μ„ ν–λ”μ§€ ν™•μΈμ„ ν•΄μ¤ _μ‹ λΆ°μ„±μ΄ λ†’μ€ ν”„λ΅ν† μ½μ΄λ‹¤._
- λ€μ‹  _μ†λ„κ°€ λλ¦¬λ‹¤λ” λ‹¨μ μ΄ μλ‹¤._

#### TCPμ μ—°κ²° λ° μ—°κ²° ν•΄μ  κ³Όμ •

__1. TCP μ—°κ²° κ³Όμ •(3-way ν•Έλ“μ‰μ΄ν¬)__

> μ”μ•½ : <br> 1) ν΄λΌμ΄μ–ΈνΈ > μ„λ²„ : `λ‚λ‘ μ—°κ²°ν•μ!` <br> 2) μ„λ²„ > ν΄λΌμ΄μ–ΈνΈ : `κ·Έλ! λ‚΄ λ§ μ λ“¤λ¦¬λ‹?` <br> 3) ν΄λΌμ΄μ–ΈνΈ > μ„λ²„ : `μ‘ μ™„μ „ μ λ“¤λ ¤!`

![Alt text](img/image-4.png)

1. SYN λ‹¨κ³„ : ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— ν΄λΌμ΄μ–ΈνΈμ ISNμ„ λ‹΄μ•„ SYNμ„ λ³΄λ‚Έλ‹¤. μ΄λ• ν΄λΌμ΄μ–ΈνΈλ” `SYN_SENT` μƒνƒλ΅ λ€κΈ°ν•λ‹¤.
2. SYN + ACK λ‹¨κ³„ : μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ SYNμ„ μμ‹ ν•κ³  μ„λ²„μ ISNμ„ λ³΄λ‚΄ μΉμΈλ²νΈλ΅ ν΄λΌμ΄μ–ΈνΈμ (ISN+1) κ°’μ„ λ³΄λ‚Έλ‹¤. μ„λ²„λ” μ΄ λ‹¨κ³„μ—μ„ `SYN_RECEIVED` μƒνƒλ΅ λ°”λ€λ‹¤.
3. ACK λ‹¨κ³„: ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ—κ²μ„ λ°›μ€ ISNμ„ ν™μ©ν•΄ ACKμΌλ΅ (ISN+1) κ°’μ„ μ„λ²„μ—κ² λ³΄λ‚Έλ‹¤. μ΄λ–„ ν΄λΌμ΄μ–ΈνΈλ” `ESTABLISHED` λ΅ λ³€κ²½μ΄ λκ³ , μ΄ ν›„ ν΄λΌμ΄μ–ΈνΈμ ACKμ„ λ°›μ€ μ„λ²„λ„ `ESTABLISHED` μƒνƒλ΅ λ³€ν•λ‹¤.

    > SYN (_Synchronize Sequence Number_) <br> μ—°κ²°μ„ μ‹μ‘ν•κ³  μ„¤μ •ν•λ” λ° μ‚¬μ©μ΄ λλ” λ¬΄μ‘μ„ κ°’

    > ACK (_Acknowledgement_) <br> νΈμ¤νΈκ°€ μƒλ€κ°€ μ „λ‹¬ν•΄μ¤€ SYNμ„ μ λ°›μ•λ‹¤κ³  μ‘λ‹µν•΄μ£Όλ” κ²ƒ

    > ISN(_Initial Sequence Number_) <br> μ΄κΈ° λ„¤νΈμ›ν¬ μ—°κ²° μ‹ ν• λ‹Ήλλ” 32λΉ„νΈ κ³ μ  μ‹ν€€μ¤ λ²νΈ

__2. TCP μ—°κ²° ν•΄μ  κ³Όμ •(4-way ν•Έλ“μ‰μ΄ν¬)__


![Alt text](img/image-5.png)

1. ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°μ„ λ‹«κ³  μ‹¶μ„ λ• FIN(Finish, μ„Έμ…μ„ μΆ…λ£μ‹ν‚¬ λ• ν™μ©μ΄ λκ³  λ” μ΄μƒ λ³΄λ‚Έ λ°μ΄ν„°κ°€ μ—†μμ„ μ•λ¦Ό)μΌλ΅ μ„¤μ •λ μ„Έκ·Έλ¨ΌνΈλ¥Ό μ„λ²„μ—κ² λ³΄λ‚Έλ‹¤. μ΄λ•, ν΄λΌμ΄μ–ΈνΈλ” `FIN_WAIT_1` μƒνƒλ΅ λ“¤μ–΄κ°€μ„ μ„λ²„ μ‘λ‹µμ„ κΈ°λ‹¤λ¦°λ‹¤.

2. ν΄λΌμ΄μ–ΈνΈμ μ—°κ²° ν•΄μ  μ”μ²­μ„ λ°›μ€ μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ—κ² ACK μΉμΈ μ„Έκ·Έλ¨ΌνΈλ¥Ό λ³΄λ‚Έλ‹¤. μ΄λ•, μ„λ²„λ” `CLOSE_WAIT` μƒνƒλ΅ λ“¤μ–΄κ°€λ©°, μ„λ²„μ ACKμ„ λ°›μ€ ν΄λΌμ΄μ–ΈνΈλ” `FIN_WAIT_2` μƒνƒλ΅ λ³€ν•λ‹¤.

3. μ„λ²„λ” ACKλ¥Ό λ³΄λ‚΄κ³  μΌμ • μ‹κ°„ ν›„ ν΄λΌμ΄μ–ΈνΈμ—κ² FIN μ„Έκ·Έλ¨ΌνΈλ¥Ό λ³΄λ‚Έλ‹¤.

4. μ„λ²„μ FIN μ„Έκ·Έλ¨ΌνΈλ¥Ό λ°›μ€ ν΄λΌμ΄μ–ΈνΈλ” `TIME_WAIT` μƒνƒκ°€ λκ³  λ‹¤μ‹ μ„λ²„λ΅ ACKλ¥Ό λ³΄λ‚Έλ‹¤. μ΄ν›„ μ„λ²„λ” `CLOSED` μƒνƒκ°€ λ¨. λ‚μ¤‘μ— _μΌμ • μ‹κ°„μ΄ μ§€λ‚ ν›„_ μ—°κ²°μ„ λ‹«κ³ (CLOSED) ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ λ¨λ“  μμ› μ—°κ²°μ€ ν•΄μ κ°€ λλ‹¤.

> β“ μ™ `TIME_WAIT`λ΅ μλ‹¤κ°€ μ‹κ°„μ΄ μ§€λ‚κ³  `CLOSED`λ΅ μ—°κ²°μ„ λ‹«μ•μ„κΉ? <br>

    1) μ§€μ—° ν¨ν‚·μ„ λ°μƒν•λ” κ²½μ°λ¥Ό λ€λΉ„ν•κ³  <br>
    2) λ‘ μ¥μΉμ μ—°κ²°μ΄ λ‹«ν”λ”μ§€ ν™•μΈν•κΈ° μ„ν•΄μ„μ΄λ‹¤

> FIN(_Finish_) <br> μ„Έμ…μ„ μΆ…λ£μ‹ν‚¬ λ• ν™μ©μ΄ λλ©° λ” μ΄μƒ λ³΄λ‚Ό λ°μ΄ν„°κ°€ μ—†μ„ μ•λ¦¬λ” μ‹κ·Έλ„


### UDP(User Datagram Protocol)

π“ __ν‚¤μ›λ“ : λΉ λ¥΄κ³ , κ°„λ‹¨ν•κ², μ‹ λΆ°μ„±μ€ λ‚®κ²__ 

![Alt text](img/image-7.png)

- λΉ„μ—°κ²°ν• ν”„λ΅ν† μ½, μ¦‰ TCPμ™€ λ‹¤λ¥΄κ² ν• λ‹Ήλλ” λ…Όλ¦¬μ μΈ κ²½λ΅κ°€ μ—†λ‹¤. κ·Έλƒ¥ μ”μ²­μ΄ λ°μƒν•λ©΄ λ°”λ΅λ°”λ΅ λ³΄λ‚΄μ£Όλ” λ°©μ‹!
- ν¨ν‚· μ‚¬μ΄μ _μμ„λ¥Ό λ³΄μ¥ν•μ§€λ„ μ•κ³ _, μμ‹  μ—¬λ¶€λ„ ν™•μΈν•μ§€ μ•μ•„ _μ‹ λΆ°μ„±μ΄ μ—†λ‹¤._
- ν•μ§€λ§ TCPλ³΄λ‹¤ _μ†λ„κ°€ λΉ λ¥΄κ³  κ°„λ‹¨ν•λ‹¤λ” μ¥μ μ΄ μλ‹¤._
- λ°μ΄ν„°λ¥Ό λ°μ΄ν„°κ·Έλ¨ λ‹¨μ„λ΅ μ²λ¦¬ν•λ” ν”„λ΅ν† μ½μ΄λ‹¤.

![Alt text](img/image-6.png) <br>
λ°μ΄ν„°κ·Έλ¨ ν¨ν‚·λ“¤μ΄ μ•μ•„μ„ μ λ”°λ΅λ”°λ΅ κ°€λ” κ²ƒμ„ λ³Ό μ μλ‹¤.

### TCP vs UDP λΉ„κµβ¨

![Alt text](img/image-8.png)

| **ν”„λ΅ν† μ½** | **TCP** | **UDP** |
| --- | --- | --- |
| **μ—°κ²° λ°©μ‹** | μ—°κ²°ν• μ„λΉ„μ¤ | λΉ„μ—°κ²°ν• μ„λΉ„μ¤ |
| **ν¨ν‚· κµν™ λ°©μ‹** | κ°€μƒ νμ„  λ°©μ‹ | λ°μ΄ν„°κ·Έλ¨ λ°©μ‹ |
| **μ „μ†΅ μμ„** | λ³΄μ¥ | λ³΄μ¥ X |
| **μμ‹  μ—¬λ¶€ ν™•μΈ**Β  | ν™•μΈν•¨ | ν™•μΈν•μ§€ X |
| **ν†µμ‹  λ°©μ‹**Β  | 1:1 ν†µμ‹  | 1:1 OR 1:N OR N:N ν†µμ‹  |
| **μ‹ λΆ°μ„±** | λ†’μ | λ‚®μ |
| **μ „μ†΅ λ°μ΄ν„° λ‹¨μ„** | ν¨ν‚· | λ°μ΄ν„°κ·Έλ¨ ν¨ν‚· |
| **μ†λ„** | λλ¦Ό | λΉ λ¦„ |